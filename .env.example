COMPOSE_PROJECT_NAME=niki-backend-challenge
NODE_ENV=development
ENVIRONMENT=development

POSTGRESQL_USERNAME=postgres
POSTGRESQL_PASSWORD=postgres123
POSTGRESQL_DATABASE=app_db
POSTGRESQL_HOST=localhost
POSTGRESQL_PORT=5432
POSTGRESQL_TIMEZONE=America/Sao_Paulo
POSTGRESQL_MAX_CONNECTIONS=100
POSTGRESQL_SHARED_BUFFERS=128MB
POSTGRESQL_EFFECTIVE_CACHE_SIZE=512MB
POSTGRESQL_WORK_MEM=4MB
POSTGRESQL_MAINTENANCE_WORK_MEM=32MB

# Service-specific database names
POSTGRESQL_DATABASE_USERS_SERVER=users
POSTGRESQL_DATABASE_PRODUCT_CATALOG_SERVER=products_catalog
POSTGRESQL_DATABASE_PRODUCT_INVENTORY_SERVER=products_inventory
POSTGRESQL_DATABASE_ORDERS_SERVER=orders
POSTGRESQL_DATABASE_PAYMENTS_SERVER=payments
POSTGRESQL_DATABASE_DELIVERY_SERVER=delivery

# -----------------------------------------------------------------------------
# Zookeeper Configuration
# -----------------------------------------------------------------------------
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000
ZOOKEEPER_INIT_LIMIT=5
ZOOKEEPER_SYNC_LIMIT=2
ZOOKEEPER_PORT=2181

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKER_ID=1
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS=3
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_INTER_BROKER_LISTENER_NAME=INTERNAL
KAFKA_LISTENERS=INTERNAL://:9092,OUTSIDE://:9094
KAFKA_ADVERTISED_LISTENERS=INTERNAL://kafka:9092,OUTSIDE://localhost:9094
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=INTERNAL:PLAINTEXT,OUTSIDE:PLAINTEXT
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_DELETE_TOPIC_ENABLE=true
KAFKA_LOG_RETENTION_HOURS=24
KAFKA_NUM_PARTITIONS=3
KAFKA_DEFAULT_REPLICATION_FACTOR=1
KAFKA_MIN_INSYNC_REPLICAS=1
KAFKA_INTERNAL_PORT=9092
KAFKA_EXTERNAL_PORT=9094

# -----------------------------------------------------------------------------
# Kafka Schema Registry Configuration
# -----------------------------------------------------------------------------
SCHEMA_REGISTRY_HOST_NAME=schema-registry
SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS=kafka:9092
SCHEMA_REGISTRY_LISTENERS=http://0.0.0.0:8081
SCHEMA_REGISTRY_KAFKASTORE_TOPIC=_schemas
SCHEMA_REGISTRY_KAFKASTORE_TOPIC_REPLICATION_FACTOR=1
SCHEMA_REGISTRY_DEBUG=false
SCHEMA_REGISTRY_SCHEMA_COMPATIBILITY_LEVEL=backward
SCHEMA_REGISTRY_AVRO_COMPATIBILITY_LEVEL=backward
SCHEMA_REGISTRY_PORT=8081
SCHEMA_REGISTRY_HEAP_OPTS=-Xms256M -Xmx512M
SCHEMA_REGISTRY_LOG4J_ROOT_LOGLEVEL=INFO
SCHEMA_REGISTRY_SCHEMA_REGISTRY_GROUP_ID=schema-registry
SCHEMA_REGISTRY_MASTER_ELIGIBILITY=true
SCHEMA_REGISTRY_KAFKASTORE_TIMEOUT_MS=10000

# -----------------------------------------------------------------------------
# Kafka Control Center Configuration
# -----------------------------------------------------------------------------
CONTROL_CENTER_BOOTSTRAP_SERVERS=kafka:9092
CONTROL_CENTER_REPLICATION_FACTOR=1
CONTROL_CENTER_CONNECT_CLUSTER=http://kafka-connect:8083
CONTROL_CENTER_SCHEMA_REGISTRY_URL=http://schema-registry:8081
CONTROL_CENTER_PORT=9021
CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS=2
CONTROL_CENTER_STREAMS_CACHE_MAX_BYTES_BUFFERING=10485760
CONTROL_CENTER_CONNECT_CONNECT_DEFAULT_CLUSTER=http://kafka-connect:8083
CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS=1
CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS=1
CONTROL_CENTER_CONNECT_HEALTHCHECK_ENDPOINT=/connectors
CONFLUENT_METRICS_TOPIC_REPLICATION=1

# -----------------------------------------------------------------------------
# Kafka Connect Configuration
# -----------------------------------------------------------------------------
CONNECT_BOOTSTRAP_SERVERS=kafka:9092
CONNECT_REST_PORT=8083
CONNECT_GROUP_ID=kafka-connect
CONNECT_CONFIG_STORAGE_TOPIC=_connect-configs
CONNECT_OFFSET_STORAGE_TOPIC=_connect-offsets
CONNECT_STATUS_STORAGE_TOPIC=_connect-status
CONNECT_KEY_CONVERTER=org.apache.kafka.connect.storage.StringConverter
CONNECT_VALUE_CONVERTER=org.apache.kafka.connect.json.JsonConverter
CONNECT_INTERNAL_KEY_CONVERTER=org.apache.kafka.connect.json.JsonConverter
CONNECT_INTERNAL_VALUE_CONVERTER=org.apache.kafka.connect.json.JsonConverter
CONNECT_REST_ADVERTISED_HOST_NAME=kafka-connect
CONNECT_LOG4J_ROOT_LOGLEVEL=INFO
CONNECT_LOG4J_LOGGERS=org.apache.kafka.connect.runtime.rest=WARN,org.reflections=ERROR
CONNECT_LOG4J_APPENDER_STDOUT_LAYOUT_CONVERSIONPATTERN=[%d] %p %X{connector.context}%m (%c:%L)%n
CONNECT_CONFIG_STORAGE_REPLICATION_FACTOR=1
CONNECT_OFFSET_STORAGE_REPLICATION_FACTOR=1
CONNECT_STATUS_STORAGE_REPLICATION_FACTOR=1
CONNECT_PLUGIN_PATH=/usr/share/java,/usr/share/confluent-hub-components,/data/connect-jars
KAFKA_CONNECT_PORT=8083

# -----------------------------------------------------------------------------
# Elasticsearch Configuration
# -----------------------------------------------------------------------------
ELASTICSEARCH_DISCOVERY_TYPE=single-node
ELASTICSEARCH_CLUSTER_NAME=niki-cluster
ELASTICSEARCH_NODE_NAME=elasticsearch
ELASTICSEARCH_BOOTSTRAP_MEMORY_LOCK=true
ELASTICSEARCH_XPACK_SECURITY_ENABLED=false
ELASTICSEARCH_XPACK_SECURITY_ENROLLMENT_ENABLED=false
ELASTICSEARCH_XPACK_MONITORING_COLLECTION_ENABLED=true
ELASTICSEARCH_INDICES_QUERIES_CACHE_SIZE=15%
ELASTICSEARCH_INDICES_FIELDDATA_CACHE_SIZE=25%
ELASTICSEARCH_THREAD_POOL_WRITE_QUEUE_SIZE=1000
ELASTICSEARCH_HTTP_CORS_ENABLED=true
ELASTICSEARCH_ACTION_DESTRUCTIVE_REQUIRES_NAME=true
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_HOST=http://localhost:9200
ELASTICSEARCH_INDEX_PRODUCTS=products.product-created
ELASTICSEARCH_INDEX_ORDERS=orders.order-created
ELASTICSEARCH_REQUEST_TIMEOUT=30000
ELASTICSEARCH_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Kibana Configuration
# -----------------------------------------------------------------------------
KIBANA_ELASTICSEARCH_HOSTS=http://elasticsearch:9200
KIBANA_NODE_OPTIONS=--max-old-space-size=8192
KIBANA_PORT=5601

# -----------------------------------------------------------------------------
# JWT Token Provider Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Change TOKEN_PROVIDER_JWT_SECRET in production!
TOKEN_PROVIDER_JWT_SECRET=production-secret-key-change-me
TOKEN_PROVIDER_JWT_EXPIRES_IN_MINUTES=14400
TOKEN_PROVIDER_JWT_ALGORITHM=HS256
TOKEN_PROVIDER_JWT_ISSUER=niki-backend

# -----------------------------------------------------------------------------
# Message Broker Provider Configuration
# -----------------------------------------------------------------------------
# For Docker containers, use kafka:9094 (internal Docker network)
MESSAGE_BROKER_PROVIDER_BROKER_URL=localhost:9094
KAFKA_CLIENT_ID=users-server

# -----------------------------------------------------------------------------
# Notification Server Configuration
# -----------------------------------------------------------------------------
# Ethereal Email (fake SMTP for testing) - Get credentials at https://ethereal.email
NOTIFICATION_SERVER_ETHEREAL_USER=maybelle.okeefe72@ethereal.email
NOTIFICATION_SERVER_ETHEREAL_PASSWORD=17jhsSSnE2dsWgGZGd
NOTIFICATION_SERVER_PORT=2228
NOTIFICATION_SERVER_HOST=0.0.0.0

# -----------------------------------------------------------------------------
# Users Server Configuration
# -----------------------------------------------------------------------------
USERS_SERVER_PORT=2222
USERS_SERVER_HOST=0.0.0.0
USERS_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_USERS_SERVER}

# -----------------------------------------------------------------------------
# Products Catalog Server Configuration
# -----------------------------------------------------------------------------
PRODUCTS_CATALOG_SERVER_PORT=2226
PRODUCTS_CATALOG_SERVER_HOST=0.0.0.0
PRODUCTS_CATALOG_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_PRODUCT_CATALOG_SERVER}

# -----------------------------------------------------------------------------
# Product Inventory Server Configuration
# -----------------------------------------------------------------------------
PRODUCT_INVENTORY_SERVER_PORT=2240
PRODUCT_INVENTORY_SERVER_HOST=0.0.0.0
PRODUCT_INVENTORY_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_PRODUCT_INVENTORY_SERVER}

# -----------------------------------------------------------------------------
# Orders Server Configuration
# -----------------------------------------------------------------------------
ORDERS_SERVER_PORT=2229
ORDERS_SERVER_HOST=0.0.0.0
ORDERS_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_ORDERS_SERVER}

# -----------------------------------------------------------------------------
# Payments Server Configuration
# -----------------------------------------------------------------------------
PAYMENTS_SERVER_PORT=2235
PAYMENTS_SERVER_HOST=0.0.0.0
PAYMENTS_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_PAYMENTS_SERVER}
ABACATE_PAY_API_URL=https://api.abacatepay.com
ABACATE_PAY_API_TOKEN=eqweqewqweq
PAYMENTS_SERVER_BILLING_RETURN_URL=http://localhost:2235/billings/return
PAYMENTS_SERVER_BILLING_COMPLETION_URL=http://localhost:2235/billings/completion

# -----------------------------------------------------------------------------
# Delivery Server Configuration
# -----------------------------------------------------------------------------
DELIVERY_SERVER_PORT=2236
DELIVERY_SERVER_HOST=0.0.0.0
DELIVERY_SERVER_DATABASE_URL=postgresql://${POSTGRESQL_USERNAME}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:5432/${POSTGRESQL_DATABASE_DELIVERY_SERVER}
